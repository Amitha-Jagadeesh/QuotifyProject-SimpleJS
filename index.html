<!DOCTYPE html>
<html>

<head>
    <title> </title>
    <style>
    </style>
</head>

<body>
    <h1 style='text-align: center;margin:5px'>Quotify</h1>

    <div id='root' class='root' style='height:500px'>
        <a href = 'https://talaikis.com/api/quotes/random/' class = 'atag' style='margin:0px 0px 0px 300px'>Random Quote(API) |</a> 
        <a href = 'saved-quotes.html' class = 'localTag' style='margin:0px 0px 0px 5px'>Random Quote(Local) |</a>  
        <a href = 'new-quote.html' class = 'addQuote' style='margin:0px 0px 0px 5px'>Add Quote |</a>  
        <a href = 'list-all-saved-quotes.html' class = 'ListAllQuotes' style='margin:0px 0px 0px 5px'>List All Quotes(Local)</a>  
        <p id='quote' class='quote' style='margin:20px 0px 0px 300px;background-color: rgb(240, 239, 239);width:50%;font-family:cursive'></p>
        <button onclick="getQuotes()" style='margin:20px 0px 0px 300px'>Get Another Quote</button>
        <button id='save' onclick="saveToLocal()" style='margin:20px 0px 0px 450px'>save to local</button>
    </div>

    <script src='https://unpkg.com/axios/dist/axios.min.js'></script>
    <script>
        pHandle = document.getElementById('quote');
        saveHandle = document.getElementById('save');
        let quotes = localStorage.getItem('quotes') ? JSON.parse(localStorage.getItem('quotes')) : [];
        localStorage.setItem('quotes', JSON.stringify(quotes));

        window.onload = function () {
            const url = 'https://talaikis.com/api/quotes/random/';
            axios.get(url).then(function (response) {
                result = response.data;
                pHandle.innerHTML = `${JSON.stringify(result.quote)}<br />
                                            ~${result.author}`;

            }).catch(function (error) {
                console.log('invalid url')
            });
        }
        function getQuotes() {
            saveHandle.innerText = 'save to local';
            saveHandle.disabled = false;
            window.onload();
        }
        function saveToLocal() {
            let quoteStorage = JSON.parse(localStorage.getItem('quotes'));   
                    
            let quote1 = {
                    'quote':JSON.stringify(result.quote),
                    'author':result.author
            } 
            quoteStorage.push(quote1);           
            localStorage.setItem('quotes', JSON.stringify(quoteStorage));
            var locaData = JSON.parse(localStorage.getItem('quotes'));
            saveHandle.innerText = 'saved';
            saveHandle.disabled = true;
        }
    </script>
</body>

</html>